"use strict";(self["webpackChunkyaoj"]=self["webpackChunkyaoj"]||[]).push([[9179],{99179:function(e,t,l){l.r(t),l.d(t,{default:function(){return V}});var o=l(49199);const a={class:"mt-4 container",style:{}},n=(0,o.createElementVNode)("div",{class:"h3 mb-4"},"Blog Editing",-1),s={class:"mb-4"},i={class:"row px-3"},c={key:0,class:"text-danger small"},r={class:"row mt-4"},d=(0,o.createElementVNode)("div",{class:"col"},null,-1),m={class:"col",style:{"text-align":"right"}},u=(0,o.createElementVNode)("label",{class:"btn btn-outline-secondary",for:"btncheck1"},"Private",-1);function h(e,t,l,h,v,b){const p=(0,o.resolveComponent)("v-md-editor");return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[n,(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",i,[(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"form-control col me-3",style:{"font-size":"1rem","min-width":"150px"},placeholder:"Title",maxlength:"80",onInput:t[0]||(t[0]=e=>v.unsave=!0),"onUpdate:modelValue":t[1]||(t[1]=e=>v.title=e)},null,544),[[o.vModelText,v.title]]),(0,o.createElementVNode)("button",{class:(0,o.normalizeClass)("btn col-2 btn-"+(v.unsave?"danger":"success")),style:{"font-size":"1rem","pointer-events":"none","min-width":"100px"}},(0,o.toDisplayString)(v.unsave?"Unsaved":"Saved"),3)]),v.title_blank?((0,o.openBlock)(),(0,o.createElementBlock)("div",c," Title cannot be blank. ")):(0,o.createCommentVNode)("",!0)]),(0,o.createVNode)(p,{modelValue:v.text,"onUpdate:modelValue":t[2]||(t[2]=e=>v.text=e),height:"600px",onSave:b.save,onChange:t[3]||(t[3]=e=>v.unsave=!0)},null,8,["modelValue","onSave"]),(0,o.createElementVNode)("div",r,[d,(0,o.createElementVNode)("button",{class:"btn btn-primary col-lg-3 col-5 ms-3",style:{"font-size":"1rem"},onClick:t[4]||(t[4]=(...e)=>b.submit&&b.submit(...e))},"Submit"),(0,o.createElementVNode)("div",m,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"checkbox",class:"btn-check",id:"btncheck1",autocomplete:"off","onUpdate:modelValue":t[5]||(t[5]=e=>v.secret=e)},null,512),[[o.vModelCheckbox,v.secret]]),u])])])}var v=l(73677),b=l(58661),p={created(){this.$user.user_id<0&&this.$router.replace("/403Forbidden")},data(){window.onbeforeunload=()=>this.unsave?1:null;var e=this.$route.query.local,t=localStorage.getItem(e+"_blog_id"),l=localStorage.getItem(e+"_title"),o=localStorage.getItem(e+"_content");return{id:t,title:null==l?"":l,title_blank:!1,text:null==o?"":o,local:this.$route.query.local,unsave:!1,secret:!1}},components:{VMdEditor:v.Z},methods:{save(){localStorage.setItem(this.local+"_title",this.title),localStorage.setItem(this.local+"_content",this.text),this.unsave=!1},submit(){this.save(),""!=this.title.trim()?(this.title_blank=!1,(0,b.F)("blog",null==this.id?"post":"put",{blog_id:this.id,title:this.title,content:this.text,private:this.secret?"1":"0"},(e=>{localStorage.removeItem(this.local+"_blog_id"),localStorage.removeItem(this.local+"_title"),localStorage.removeItem(this.local+"_content"),this.$router.replace("/blog/"+(null==this.id?e.data.id:this.id))}),(e=>{alert(e.data._error)}))):this.title_blank=!0}},unmounted(){this.unsave&&this.save()}},g=l(40089);const k=(0,g.Z)(p,[["render",h]]);var V=k}}]);
//# sourceMappingURL=9179.81407bb6.js.map