"use strict";(self["webpackChunkyaoj"]=self["webpackChunkyaoj"]||[]).push([[811],{80811:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var o=n(49199);const r={class:"mt-4 container"},a={class:"modal fade",id:"addAnouncement",tabindex:"-1"},l={class:"modal-dialog"},i={class:"modal-content"},s=(0,o.createElementVNode)("div",{class:"modal-header"},[(0,o.createElementVNode)("h5",{class:"modal-title"},"Add new announcement"),(0,o.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),d={class:"modal-body"},c={class:"container"},m={class:"modal-footer"},u=(0,o.createElementVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),h={class:"card"},g={class:"card-header"},p={class:"row mt-1 mb-1 px-2"},y=(0,o.createElementVNode)("div",{class:"mb-0 h5 col"},"Announcements",-1),b={key:0,class:"col",href:"#",style:{"text-align":"right","font-size":"1.3rem",height:"20px"},"data-bs-toggle":"modal","data-bs-target":"#addAnouncement"},v={class:"card-body px-0 pb-0"},f={key:0,class:"container"},V={class:"card mt-4"},N=(0,o.createElementVNode)("div",{class:"card-header"},[(0,o.createElementVNode)("div",{class:"row mt-1 mb-1 px-2"},[(0,o.createElementVNode)("div",{class:"mb-0 h5 col"},"Top Rating 10"),(0,o.createElementVNode)("a",{class:"col",href:"#/users",style:{"text-align":"right","margin-top":"2px"}}," view all ")])],-1),E={class:"card-body px-0 pb-0"},k={class:"container"};function w(e,t,n,w,x,_){const A=(0,o.resolveComponent)("ion-icon"),C=(0,o.resolveComponent)("Table");return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("div",a,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",i,[s,(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("div",c,[(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"form-control form-signin-top",placeholder:"Blog id",style:{"font-size":"1rem"},"onUpdate:modelValue":t[0]||(t[0]=e=>x.blog_id=e)},null,512),[[o.vModelText,x.blog_id]]),(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"form-control form-signin-bottom",placeholder:"Priority(1~10)",style:{"font-size":"1rem"},"onUpdate:modelValue":t[1]||(t[1]=e=>x.priority=e)},null,512),[[o.vModelText,x.priority]])])]),(0,o.createElementVNode)("div",m,[u,(0,o.createElementVNode)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[2]||(t[2]=(...e)=>_.addAnouncement&&_.addAnouncement(...e))},"Submit")])])])]),(0,o.createElementVNode)("div",h,[(0,o.createElementVNode)("div",g,[(0,o.createElementVNode)("div",p,[y,e.$user.user_group<=1?((0,o.openBlock)(),(0,o.createElementBlock)("a",b,[(0,o.createElementVNode)("strong",null,[(0,o.createVNode)(A,{name:"add",style:{"--ionicon-stroke-width":"50px",color:"gray"}})])])):(0,o.createCommentVNode)("",!0)])]),(0,o.createElementVNode)("div",v,[x.reloadAnnounce?((0,o.openBlock)(),(0,o.createElementBlock)("div",f,[(0,o.createVNode)(C,{row:_.getAnnounceRow,pagination:!1,get:_.getAnnouncements},null,8,["row","get"])])):(0,o.createCommentVNode)("",!0)])]),(0,o.createElementVNode)("div",V,[N,(0,o.createElementVNode)("div",E,[(0,o.createElementVNode)("div",k,[(0,o.createVNode)(C,{row:_.getUserLine,get:_.getUsers,pagination:!1},null,8,["row","get"])])])])])}var x=n(22664),_=n(51826),A=n(58661),C=n(6686),B={data(){return{blog_id:"",priority:"",reloadAnnounce:!0}},components:{Table:x.Z,ClickLike:_.Z},methods:{getAnnounceRow(e){return null==e?[(0,o.h)("td",{style:"text-align: left"},(0,o.h)("strong","Title")),(0,o.h)("td",{style:"width:15%"},(0,o.h)("strong","Release Date")),(0,o.h)("td",{style:"width: 10%; text-align: right"},(0,o.h)("strong","Comments")),this.$user.user_group<=1?(0,o.h)("td",{style:"width: 10%;"},(0,o.h)("strong","Priority")):null]:[(0,o.h)("td",{style:"text-align: left"},(0,o.h)("a",{href:"#/blog/"+e.blog_id},e.title)),(0,o.h)("td",{},(0,C.WU)(e.release_time,"YYYY-MM-DD")),(0,o.h)("td",(0,o.h)("div",{class:"row"},[(0,o.h)(_.Z,{class:"col px-0",icon:"chatbox-outline",number:e.comments}),(0,o.h)(_.Z,{class:"col px-0",icon:"thumbs-up-outline",number:e.like,target:{name:"blog",id:e.blog_id},active:e.liked})])),this.$user.user_group<=1?(0,o.h)("td",[e.priority+" ",(0,o.h)("a",{href:"#",onClick:this.deleteAnnounce(e.id)},"delete")]):null]},async getAnnouncements(e){try{var t=await new Promise(((e,t)=>{(0,A.F)("announcements","get",{},e,t)}));return null!=t.data.data&&t.data.data.sort(((e,t)=>e.priority!=t.priority?t.priority-e.priority:t.id-e.id)),t.data}catch(n){alert(n.data._error)}},addAnouncement(){(0,A.F)("announcements","post",{blog_id:this.blog_id,priority:this.priority},(e=>{this.reloadAnnounce=!1,(0,o.nextTick)((()=>{this.reloadAnnounce=!0}))}),(e=>{alert(e.data._error)}))},deleteAnnounce(e){return function(t){t.preventDefault(),confirm("Do you really want to delete?")&&(0,A.F)("announcements","delete",{id:e},(e=>{this.reloadAnnounce=!1,(0,o.nextTick)((()=>{this.reloadAnnounce=!0}))}),(e=>{alert(e.data._error)}))}},async getUsers(e){e={pagesize:10,left_rating:9999,left_user_id:0};try{var t=await new Promise((function(t,n){(0,A.F)("users","get",e,t,n)}));return t.data}catch(n){alert(n.data._error)}},getUserLine(e){return null==e?[(0,o.h)("td",{style:"text-align:left"},(0,o.h)("strong","#ID")),(0,o.h)("td",{style:"text-align:left"},(0,o.h)("strong","Username")),(0,o.h)("td",{},(0,o.h)("strong","Motto")),(0,o.h)("td",{style:"width: 10%"},(0,o.h)("strong","Rating"))]:[(0,o.h)("td",{style:"text-align:left"},e.user_id),(0,o.h)("td",{style:"text-align:left"},(0,o.h)("a",{href:"#/user/"+e.user_id},e.user_name)),(0,o.h)("td",e.motto),(0,o.h)("td",e.rating)]}}},D=n(40089);const T=(0,D.Z)(B,[["render",w]]);var U=T},51826:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(49199);const r={style:{"vertical-align":"middle"}};function a(e,t,n,a,l,i){const s=(0,o.resolveComponent)("ion-icon");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(n.class),style:(0,o.normalizeStyle)((void 0==n.target?"":"cursor: pointer;")+(l.current^n.active?"color: #F70":"")),onClick:t[0]||(t[0]=(...e)=>i.like&&i.like(...e))},[(0,o.createVNode)(s,{name:n.icon,style:{"vertical-align":"middle","font-size":"1rem","margin-right":"2px"}},null,8,["name"]),(0,o.createElementVNode)("span",r,(0,o.toDisplayString)(i.num),1)],6)}var l=n(58661),i={props:["icon","number","active","target","class"],data(){return{current:!1}},methods:{like(){void 0!=this.target&&(0,l.F)("likes","post",{target:this.target.name,id:this.target.id},(e=>{this.current=!this.current}),(e=>{alert(e.data._error)}))}},computed:{num(){return this.active?this.number+(this.current?-1:0):this.number+(this.current?1:0)}}},s=n(40089);const d=(0,s.Z)(i,[["render",a]]);var c=d}}]);
//# sourceMappingURL=811.7dcf76ca.js.map