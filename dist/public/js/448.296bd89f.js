"use strict";(self["webpackChunkyaoj"]=self["webpackChunkyaoj"]||[]).push([[448],{90448:function(e,t,o){o.r(t),o.d(t,{default:function(){return I}});var l=o(49199);const r={class:"container mt-4"},n={class:"row align-items-end mb-3"},a={class:"col"},c={key:0,class:"col-3 btn-group",style:{"text-align":"right"}},m={class:"card"},s={class:"card-body px-0 pb-0"},i={class:"card-footer"},d={class:"row"},u={class:"small ms-3 col",style:{color:"gray"}},b=(0,l.createTextVNode)(" by "),g=["href"],h={key:0,class:"mt-4"},p={class:"card mt-3"},V={class:"card-body px-0 pb-0",style:{"margin-bottom":"-20px"}},v={class:"card-footer"},k={class:"row"},N={class:"small ms-3 col",style:{color:"gray"}},_=(0,l.createTextVNode)(" by "),y=["href"],x=["onClick"],E=(0,l.createElementVNode)("h4",{class:"mt-4 mb-3"},"Write Your Comment",-1),w={class:"text-center mt-3"};function C(e,t,o,C,f,B){const D=(0,l.resolveComponent)("v-md-preview"),S=(0,l.resolveComponent)("ClickLike"),$=(0,l.resolveComponent)("v-md-editor");return(0,l.openBlock)(),(0,l.createElementBlock)("div",r,[(0,l.createElementVNode)("div",n,[(0,l.createElementVNode)("div",a,[(0,l.createElementVNode)("h3",null,[(0,l.createElementVNode)("strong",null,(0,l.toDisplayString)(f.blog.title),1)])]),e.$user.user_group<=1||e.$user.user_id==f.blog.author?((0,l.openBlock)(),(0,l.createElementBlock)("div",c,[(0,l.createElementVNode)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>B.edit&&B.edit(...e))},"Edit"),(0,l.createElementVNode)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>B.remove&&B.remove(...e))},"Delete")])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",m,[(0,l.createElementVNode)("div",s,[(0,l.createVNode)(D,{text:f.blog.content},null,8,["text"])]),(0,l.createElementVNode)("div",i,[(0,l.createElementVNode)("div",d,[(0,l.createElementVNode)("div",u,[b,(0,l.createElementVNode)("a",{href:"#/user/"+f.blog.author},(0,l.toDisplayString)(f.blog.author_name),9,g),(0,l.createTextVNode)(" at "+(0,l.toDisplayString)(f.blog.create_time),1)]),(0,l.createVNode)(S,{class:"col px-0",icon:"chatbox-outline",style:{"max-width":"50px"},number:f.blog.comments},null,8,["number"]),(0,l.createVNode)(S,{class:"col px-0 me-2",icon:"thumbs-up-outline",style:{"max-width":"50px"},number:f.blog.like,active:f.blog.liked,target:{name:"blog",id:f.id}},null,8,["number","active","target"])])])]),null!=f.comments?((0,l.openBlock)(),(0,l.createElementBlock)("h4",h,"Comments")):(0,l.createCommentVNode)("",!0),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(f.comments,(t=>((0,l.openBlock)(),(0,l.createElementBlock)("div",p,[(0,l.createElementVNode)("div",V,[(0,l.createVNode)(D,{text:t.content},null,8,["text"])]),(0,l.createElementVNode)("div",v,[(0,l.createElementVNode)("div",k,[(0,l.createElementVNode)("div",N,[_,(0,l.createElementVNode)("a",{href:"#/user/"+t.author},(0,l.toDisplayString)(t.author_name),9,y),(0,l.createTextVNode)(" at "+(0,l.toDisplayString)(t.create_time.replace(/[A-Z]/g," ")),1)]),e.$user.user_group<=1||t.author==e.$user.user_id?((0,l.openBlock)(),(0,l.createElementBlock)("a",{key:0,href:"#",class:"col px-0",style:{"max-width":"60px"},onClick:(0,l.withModifiers)((e=>B.deleteComment(t.comment_id)),["prevent"])},"delete",8,x)):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(S,{class:"col px-0 me-2",icon:"thumbs-up-outline",style:{"max-width":"50px"},number:t.like,active:t.liked,target:{name:"comment",id:t.comment_id}},null,8,["number","active","target"])])])])))),256)),E,(0,l.createVNode)($,{height:"300px","left-toolbar":"undo redo clear",modelValue:f.new_comment,"onUpdate:modelValue":t[2]||(t[2]=e=>f.new_comment=e)},null,8,["modelValue"]),(0,l.createElementVNode)("div",w,[(0,l.createElementVNode)("button",{class:"btn btn-primary",style:{"min-width":"100px"},onClick:t[3]||(t[3]=(...e)=>B.newComment&&B.newComment(...e))},"Submit")])])}var f=o(58661),B=o(3157),D=o(51826),S=o(73677),$=o(6686),F={data(){return{id:this.$route.params.id,blog:{author:"",title:"",content:"",create_time:"",comments:0,like:0,liked:!1},new_comment:"",comments:null}},created(){(0,f.F)("blog","get",{blog_id:this.id},(e=>{this.blog=e.data,this.blog.create_time=(0,$.WU)(new Date(this.blog.create_time))}),(e=>{this.$router.replace("/404NotFound")})),this.getComments()},components:{VMdPreview:B.Z,ClickLike:D.Z,VMdEditor:S.Z},methods:{edit(){var e=(0,f.O1)(16);localStorage.setItem(e+"_blog_id",this.id),localStorage.setItem(e+"_title",this.blog.title),localStorage.setItem(e+"_content",this.blog.content),this.$router.push("/editblog?local="+e)},remove(){confirm("Do you really want to delete?")&&(0,f.F)("blog","delete",{blog_id:this.id},(e=>{this.$router.replace("/blogs")}),(e=>{alert(e.data._error)}))},getComments(){(0,f.F)("blog_comments","get",{blog_id:this.id},(e=>{this.comments=e.data.data}),(e=>{alert(e.data._error)}))},newComment(){(0,f.F)("blog_comments","post",{blog_id:this.id,content:this.new_comment},(e=>{var t=document.body.scrollHeight;window.scroll({top:t,left:0}),this.new_comment="",this.getComments()}),(e=>{alert(e.data._error)}))},deleteComment(e){confirm("Do you really want to delete?")&&(0,f.F)("blog_comments","delete",{comment_id:e},(e=>{this.getComments()}),(e=>{alert(e.data._error)}))}}},Z=o(40089);const T=(0,Z.Z)(F,[["render",C]]);var I=T}}]);
//# sourceMappingURL=448.296bd89f.js.map