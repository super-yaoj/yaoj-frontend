"use strict";(self["webpackChunkyaoj"]=self["webpackChunkyaoj"]||[]).push([[3517],{37271:function(e,t,a){function n(e,t){return e&&t?"OI":e&&!t?"UOJ":!e&&t?"IOI":e||t?void 0:"ACM"}function s(e,t,a){if(a)return"Finished";var n=new Date;return n<e?"Not started":n<=t?"Running":"Not finished"}function o(e){switch(e){case 0:return{color:"gray",val:"disabled"};case 1:return{color:"green",val:"register"};case 2:return{color:"red",val:"cancel"}}}a.d(t,{lB:function(){return o},lR:function(){return s},pg:function(){return n}})},43517:function(e,t,a){a.r(t),a.d(t,{default:function(){return ue}});var n=a(49199);const s={class:"mt-4 container"},o={class:"row align-items-end"},l=(0,n.createElementVNode)("div",{class:"col"},null,-1),i={class:"text-center col mb-0"},r={class:"nav nav-tabs mt-3"},c=(0,n.createElementVNode)("li",{class:"nav-item"},[(0,n.createElementVNode)("button",{class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#dashboard"},"Dashboard")],-1),d=(0,n.createElementVNode)("li",{class:"nav-item",role:"presentation"},[(0,n.createElementVNode)("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#submission"},"Submissions")],-1),m=(0,n.createElementVNode)("li",{class:"nav-item",role:"presentation"},[(0,n.createElementVNode)("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#standing"},"Standing")],-1),u={key:0,class:"nav-item",role:"presentation"},h=(0,n.createElementVNode)("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#manage"},"Manage",-1),p=[h],v={class:"tab-content"},b={class:"tab-pane fade show active mt-3",id:"dashboard"},g={class:"row px-2"},N={class:"col",style:{"max-width":"250px"}},V={class:"card"},f={class:"card-body text-center"},_=(0,n.createElementVNode)("div",{style:{color:"#666"}},"Remaining Time:",-1),E=(0,n.createElementVNode)("hr",null,null,-1),y={style:{color:"#666"}},k=(0,n.createElementVNode)("br",null,null,-1),w=(0,n.createTextVNode)("Max Rating Change: 0"),x=(0,n.createElementVNode)("br",null,null,-1),C=["href"],D={key:0,class:"btn btn-danger mt-3",style:{width:"100%"}},T={class:"col"},M=(0,n.createElementVNode)("div",{class:"tab-pane fade",id:"submission"},"...",-1),B=(0,n.createElementVNode)("div",{class:"tab-pane fade",id:"standing"},"...",-1),S={key:0,class:"tab-pane fade mt-3",id:"manage"},Z={class:"d-flex align-items-start"},F={class:"nav flex-column nav-pills me-3"},U=["value"],R=(0,n.createElementVNode)("button",{class:"nav-link","data-bs-toggle":"pill","data-bs-target":"#v-pills-permissions"},"Permissions",-1),q=(0,n.createElementVNode)("button",{class:"nav-link","data-bs-toggle":"pill","data-bs-target":"#v-pills-managers"},"Managers",-1),O={class:"tab-content container"},P={class:"tab-pane fade show active",id:"v-pills-basic"},z=(0,n.createElementVNode)("label",{class:"ml-1"},[(0,n.createElementVNode)("strong",null,"Contest Name:")],-1),I=(0,n.createElementVNode)("hr",null,null,-1),L=(0,n.createElementVNode)("label",{class:"ml-1"},[(0,n.createElementVNode)("strong",null,"Start Time:")],-1),j=(0,n.createElementVNode)("label",{class:"ml-1"},[(0,n.createElementVNode)("strong",null,"Last:")],-1),J=(0,n.createElementVNode)("hr",null,null,-1),A={class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},W=(0,n.createElementVNode)("label",{class:"btn btn-outline-secondary",style:{"border-right":"0px"},for:"btncheck1"},"Pretest Only",-1),$=(0,n.createElementVNode)("label",{class:"btn btn-outline-secondary",for:"btncheck2"},"Score Private",-1),G=(0,n.createElementVNode)("button",{class:"btn btn-primary"},"Submit",-1),Y=[G],H={class:"tab-pane fade",id:"v-pills-permissions"},K={class:"tab-pane fade",id:"v-pills-managers"};function Q(e,t,a,h,G,Q){const X=(0,n.resolveComponent)("ClickLike"),ee=(0,n.resolveComponent)("Clock"),te=(0,n.resolveComponent)("ManageTable");return(0,n.openBlock)(),(0,n.createElementBlock)("div",s,[(0,n.createElementVNode)("div",o,[l,(0,n.createElementVNode)("h3",i,(0,n.toDisplayString)(G.contest.title),1),(0,n.createVNode)(X,{class:"col text-right",icon:"thumbs-up-outline",number:G.contest.like,target:{name:"contest",id:G.id},active:G.contest.liked},null,8,["number","target","active"])]),(0,n.createElementVNode)("ul",r,[c,d,m,G.can_edit?((0,n.openBlock)(),(0,n.createElementBlock)("li",u,p)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",v,[(0,n.createElementVNode)("div",b,[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("div",N,[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("div",f,[_,(0,n.createElementVNode)("h2",null,[(0,n.createVNode)(ee,{seconds:(G.contest.end_time-G.current_time)/1e3},null,8,["seconds"])]),E,(0,n.createElementVNode)("div",y,[(0,n.createTextVNode)("Rule: "+(0,n.toDisplayString)(G.rule),1),k,w,x,(0,n.createTextVNode)("Status: "+(0,n.toDisplayString)(G.status),1)])])]),(0,n.createElementVNode)("a",{class:"btn btn-light mt-3",style:{width:"100%"},href:"#/contest/"+G.id+"/participants"},"Participants",8,C),G.can_edit?((0,n.openBlock)(),(0,n.createElementBlock)("button",D,"End Contest")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",T,[(0,n.createVNode)(te,{url:"contest_problems",data_name:["contest_id","problem_id","title"],title:"Problem",name:"problem","no-modify":!G.can_edit,query:{contest_id:G.id}},null,8,["no-modify","query"])])])]),M,B,G.can_edit?((0,n.openBlock)(),(0,n.createElementBlock)("div",S,[(0,n.createElementVNode)("div",Z,[(0,n.createElementVNode)("div",F,[(0,n.createElementVNode)("button",{class:"nav-link active","data-bs-toggle":"pill","data-bs-target":"#v-pills-basic",value:G.id},"Basic",8,U),R,q]),(0,n.createElementVNode)("div",O,[(0,n.createElementVNode)("div",P,[z,(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"form-control info-input-form",placeholder:"Contest Name","onUpdate:modelValue":t[0]||(t[0]=e=>G.newcontest.title=e),maxlength:"80"},null,512),[[n.vModelText,G.newcontest.title]]),I,L,(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"form-control info-input-form",placeholder:"Start Time","onUpdate:modelValue":t[1]||(t[1]=e=>G.newcontest.start_time=e)},null,512),[[n.vModelText,G.newcontest.start_time]]),j,(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"form-control info-input-form",placeholder:"End Time","onUpdate:modelValue":t[2]||(t[2]=e=>G.newcontest.last=e)},null,512),[[n.vModelText,G.newcontest.last]]),J,(0,n.createElementVNode)("div",A,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",class:"btn-check",id:"btncheck1",autocomplete:"off","onUpdate:modelValue":t[3]||(t[3]=e=>G.newcontest.pretest=e)},null,512),[[n.vModelCheckbox,G.newcontest.pretest]]),W,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",class:"btn-check",id:"btncheck2",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=e=>G.newcontest.score_private=e)},null,512),[[n.vModelCheckbox,G.newcontest.score_private]]),$]),(0,n.createElementVNode)("div",{class:"text-center mt-1",onClick:t[5]||(t[5]=(...e)=>Q.modifyContest&&Q.modifyContest(...e))},Y)]),(0,n.createElementVNode)("div",H,[(0,n.createVNode)(te,{url:"contest_permissions",data_name:["contest_id","permission_id","permission_name"],title:"Permission",name:"permission"})]),(0,n.createElementVNode)("div",K,[(0,n.createVNode)(te,{url:"contest_managers",data_name:["contest_id","user_id","user_name"],title:"Manager",name:"user"})])])])])):(0,n.createCommentVNode)("",!0)])])}var X=a(58661),ee=a(51826),te=a(22664),ae=a(48773);function ne(e,t,a,s,o,l){return(0,n.toDisplayString)(l.str)}var se={props:["seconds"],data(){return{remain:this.seconds}},created(){setInterval((()=>{--this.remain}),1e3)},computed:{str(){var e=Math.floor(this.remain/3600),t=Math.floor(this.remain/60)%60,a=Math.floor(this.remain)%60;return this.format(e)+":"+this.format(t)+":"+this.format(a)}},methods:{format(e){var t=""+e;while(t.length<2)t="0"+t;return t}},watch:{seconds(){this.remain=this.seconds}}},oe=a(40089);const le=(0,oe.Z)(se,[["render",ne]]);var ie=le,re=a(37271),ce=a(6686),de={inject:["reload"],data(){return{id:this.$route.params.id,contest:{title:"",like:0,liked:!1,start_time:"",end_time:""},can_edit:!1,current_time:"",rule:"",status:"",newcontest:{}}},components:{ClickLike:ee.Z,Table:te.Z,ManageTable:ae.Z,Clock:ie},created(){(0,X.F)("contest","get",{contest_id:this.id},(e=>{this.contest=e.data.contest,this.contest.start_time=new Date(this.contest.start_time),this.contest.end_time=new Date(this.contest.end_time),this.can_edit=e.data.can_edit,this.rule=(0,re.pg)(this.contest.pretest,this.contest.score_private),this.status=(0,re.lR)(this.contest.start_time,this.contest.end_time,this.contest.finished),this.newcontest={contest_id:this.id,title:this.contest.title,start_time:(0,ce.WU)(this.contest.start_time),last:Math.floor(this.contest.end_time-this.contest.start_time)/6e4,pretest:this.contest.pretest,score_private:this.contest.score_private}})),(0,X.mY)("GetTime",{},(e=>{this.current_time=new Date(e.data.server_time)}))},methods:{modifyContest(){var e=JSON.parse(JSON.stringify(this.newcontest));e.start_time=(0,ce.WU)(new Date(this.newcontest.start_time).getTime()+60*(new Date).getTimezoneOffset()*1e3),e.pretest=this.newcontest.pretest?1:0,e.score_private=this.newcontest.score_private?1:0,(0,X.F)("contest","patch",e,(e=>{this.reload()}),(e=>{alert(e.data._error)}))}}};const me=(0,oe.Z)(de,[["render",Q]]);var ue=me},51826:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(49199);const s={style:{"vertical-align":"middle"}};function o(e,t,a,o,l,i){const r=(0,n.resolveComponent)("ion-icon");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(a.class),style:(0,n.normalizeStyle)((void 0==a.target?"":"cursor: pointer;")+(l.current^a.active?"color: #F70":"")),onClick:t[0]||(t[0]=(...e)=>i.like&&i.like(...e))},[(0,n.createVNode)(r,{name:a.icon,style:{"vertical-align":"middle","font-size":"1rem","margin-right":"2px"}},null,8,["name"]),(0,n.createElementVNode)("span",s,(0,n.toDisplayString)(i.num),1)],6)}var l=a(58661),i={props:["icon","number","active","target","class"],data(){return{current:!1}},methods:{like(){void 0!=this.target&&(0,l.F)("likes","post",{target:this.target.name,id:this.target.id},(e=>{this.current=!this.current}),(e=>{alert(e.data._error)}))}},computed:{num(){return this.active?this.number+(this.current?-1:0):this.number+(this.current?1:0)}}},r=a(40089);const c=(0,r.Z)(i,[["render",o]]);var d=c},48773:function(e,t,a){a.d(t,{Z:function(){return y}});var n=a(49199);const s=["id"],o={class:"modal-dialog"},l={class:"modal-content"},i={class:"modal-header"},r={class:"modal-title"},c=(0,n.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),d={class:"modal-body"},m=["placeholder"],u={class:"modal-footer"},h=(0,n.createElementVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function p(e,t,a,p,v,b){const g=(0,n.resolveComponent)("Table");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createElementVNode)("div",{class:"modal fade",id:"add_"+a.name,tabindex:"-1"},[(0,n.createElementVNode)("div",o,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("h5",r,"Add "+(0,n.toDisplayString)(a.title),1),c]),(0,n.createElementVNode)("div",d,[(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"form-control",placeholder:a.name+" id","onUpdate:modelValue":t[0]||(t[0]=e=>v.add_id=e)},null,8,m),[[n.vModelText,v.add_id]])]),(0,n.createElementVNode)("div",u,[h,(0,n.createElementVNode)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...e)=>b.add&&b.add(...e))},"Submit")])])])],8,s),v.reload?((0,n.openBlock)(),(0,n.createBlock)(g,{key:0,pagination:!1,get:b.getData,row:b.getRow},null,8,["get","row"])):(0,n.createCommentVNode)("",!0)],64)}var v=a(51826),b=a(22664),g=a(58661),N=a(95410),V=a.n(N),f={props:["url","data_name","title","name","no-modify","query"],data(){return{id:this.$route.params.id,reload:!0,add_id:"",_query:void 0==this.query?"":"?"+V().stringify(this.query)}},components:{ClickLike:v.Z,Table:b.Z},methods:{getRow(e){return null==e?[(0,n.h)("td",{style:"text-align:left;width:10%"},(0,n.h)("strong","#ID")),(0,n.h)("td",{style:"text-align:left"},(0,n.h)("strong",this.title+" Name")),this.noModify?null:(0,n.h)("td",{style:"text-align:right"},(0,n.h)("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#add_"+this.name},(0,n.h)("ion-icon",{name:"add-outline",style:"font-size: 1.2rem; vertical-align: text-bottom; color: gray; --ionicon-stroke-width: 40px;"})))]:[(0,n.h)("td",{style:"text-align:left"},e[this.data_name[1]]),(0,n.h)("td",{style:"text-align:left"},(0,n.h)("a",{href:"#/"+this.name+"/"+e[this.data_name[1]]+this._query},e[this.data_name[2]])),this.noModify?null:(0,n.h)("td",{style:"text-align:right"},(0,n.h)("a",{href:"#",onClick:this.delete(e[this.data_name[1]])},(0,n.h)("ion-icon",{name:"remove-outline",style:"font-size: 1.2rem; vertical-align: text-bottom; color: gray; --ionicon-stroke-width: 40px;"})))]},async getData(e){try{var t={};t[this.data_name[0]]=this.id;var a=await new Promise(((e,a)=>{(0,g.F)(this.url,"get",t,e,a)}));return null!=a.data.data&&a.data.data.sort(((e,t)=>e[this.data_name[1]]-t[this.data_name[1]])),a.data}catch(n){alert(n.data._error)}},delete(e){return t=>{t.preventDefault();var a={};a[this.data_name[0]]=this.id,a[this.data_name[1]]=e,(0,g.F)(this.url,"delete",a,(e=>{this.reload=!1,(0,n.nextTick)((()=>{this.reload=!0}))}),(e=>{alert(e.data._error)}))}},add(){var e={};e[this.data_name[0]]=this.id,e[this.data_name[1]]=this.add_id,(0,g.F)(this.url,"post",e,(e=>{this.reload=!1,(0,n.nextTick)((()=>{this.reload=!0}))}),(e=>{alert(e.data._error)}))}}},_=a(40089);const E=(0,_.Z)(f,[["render",p]]);var y=E}}]);
//# sourceMappingURL=3517.25353368.js.map