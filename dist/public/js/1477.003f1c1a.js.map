{"version":3,"file":"public/js/1477.003f1c1a.js","mappings":"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","sources":["webpack://yaoj/./src/components/contest/contest.js","webpack://yaoj/./src/components/contest/ContestList.vue","webpack://yaoj/./src/components/contest/ContestList.vue?61a0","webpack://yaoj/./src/models/ClickLike.vue","webpack://yaoj/./src/models/ClickLike.vue?981b"],"sourcesContent":["export {\r\n    getRule,\r\n    getStatus,\r\n    getRegisterStatus,\r\n}\r\n\r\nfunction getRule(pretest, score_private) {\r\n    if (pretest && score_private) return 'OI'\r\n    if (pretest && !score_private) return 'UOJ'\r\n    if (!pretest && score_private) return 'IOI'\r\n    if (!pretest && !score_private) return 'ACM'\r\n}\r\n\r\nfunction getStatus(start_time, end_time, over) {\r\n    if (over) return 'Finished'\r\n    var date = new Date()\r\n    if (date < start_time) return 'Not started'\r\n    if (date <= end_time) return 'Running'\r\n    return 'Not finished'\r\n}\r\n\r\nfunction getRegisterStatus(status) {\r\n    switch (status) {\r\n    case 0: return { color: \"gray\", val: \"disabled\" }\r\n    case 1: return { color: \"green\", val: \"register\" }\r\n    case 2: return { color: \"red\", val: \"cancel\" }\r\n    }\r\n}","<template>\r\n<div class=\"mt-4 container\">\r\n    <div class=\"row mb-3\">\r\n        <div class=\"col\">\r\n            <div class=\"h3 mb-0\">Contest List</div>\r\n        </div>\r\n        <div class=\"col\" style=\"text-align:right;\" v-if=\"$user.user_group <= 1\">\r\n            <button class=\"btn btn-sm btn-primary\" @click=\"addContest\">New Contest</button>\r\n            <div class=\"text-success small\" v-if=\"success > 0\">\r\n                Successfully added, contest id: {{success}}.\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <Table :row=\"getLine\" :sizes=\"[20, 50, 100]\" :get=\"getContests\" :next=\"getNext\" :pagination=\"true\" v-if=\"reloadContests\"></Table>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Table from '@/models/Table.vue'\r\nimport ClickLike from '@/models/ClickLike.vue'\r\nimport { callAPI } from '@/utils'\r\nimport { h, nextTick } from 'vue'\r\nimport { format } from 'silly-datetime'\r\nimport { getRule, getRegisterStatus, getStatus } from './contest.js'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            reloadContests: true,\r\n            success: \"\",\r\n        }\r\n    },\r\n    components: {\r\n        Table,\r\n        ClickLike,\r\n    },\r\n    methods: {\r\n        getLine(row) {\r\n            if (row == null) return [\r\n                h('td', { style: \"width: 10%\" }, h('strong', 'Operation')),\r\n                h('td', { style: \"width: 30%\" }, h('strong', 'Contest Name')),\r\n                h('td', { style: \"width: 5%\" }, h('strong', 'Rule')),\r\n                h('td', { style: \"width: 20%\" }, h('strong', 'Start Time')),\r\n                h('td', { style: \"width: 10%\" }, h('strong', 'Length')),\r\n                h('td', { style: \"width: 10%\" }, h('strong', 'Status')),\r\n                h('td', { style: \"width: 10%\" }, h('strong', 'Comments')),\r\n            ]\r\n            var reg = getRegisterStatus(row.register_status)\r\n            var start = new Date(row.start_time), end = new Date(row.end_time), status = getStatus(start, end, row.finished)\r\n            return [\r\n                h('td', h('a', { href: \"#\", style: \"color:\" + reg.color, onClick: this.register(row.contest_id, row.register_status) }, reg.val)),\r\n                h('td', {}, h('a', { href: \"#/contest/\" + row.contest_id }, row.title)),\r\n                h('td', {}, getRule(row.pretest, row.score_private)),\r\n                h('td', {}, format(start)),\r\n                h('td', {}, (end - start) / 60000 + ' min'),\r\n                h('td', {}, h('span', { style: \"color:\" + {\"Not started\": \"green\", \"Running\": \"red\", \"Not finished\": \"blue\", \"Finished\": \"black\"}[status] }, status)),\r\n                h('td', h('div', { class: \"row px-0 mx-0 justify-content-end\" }, [\r\n                        h('a', { class: \"col px-0\", href: \"#/contest/\" + row.contest_id + \"/participants\" }, [\r\n                            h('ion-icon', { name: \"people\", style: \"vertical-align: middle; font-size: 1rem; margin-right: 2px;\" }, null),\r\n                            h('span', { style: \"vertical-align: middle;\" }, row.registrants)\r\n                        ]),\r\n                        h(ClickLike, { class: \"col px-0\", icon: \"thumbs-up-outline\", number: row.like, target: { name: \"contest\", id: row.contest_id }, active: row.liked }),\r\n                    ])\r\n                ),\r\n            ]\r\n        },\r\n        async getContests(query) {\r\n            try {\r\n                var res = await new Promise((res, rej) => {\r\n                    callAPI('contests', 'get', query, res, rej)\r\n                })\r\n                console.log(res.data)\r\n                return res.data\r\n            } catch(e) {\r\n                alert(e.data._error)\r\n            }\r\n        },\r\n        getNext(a, b) {\r\n            if (a == null) {\r\n                return b < 0 ? 1 << 30 : 0;\r\n            } else return a - b;\r\n        },\r\n        reload() {\r\n            this.reloadContests = false\r\n            nextTick(() => { this.reloadContests = true })\r\n        },\r\n        addContest() {\r\n            callAPI('contest', 'post', {}, (res) => {\r\n                this.success = res.data.id\r\n                this.reload()\r\n            }, (res) => {\r\n                alert(res.data._error)\r\n            })\r\n        },\r\n        register(id, status) {\r\n            return (event) => {\r\n                event.preventDefault()\r\n                if (status == 0) return\r\n                callAPI('contest_participants', status == 1 ? 'post' : 'delete', { contest_id: id }, (res) => {\r\n                    this.reload()\r\n                }, (res) => {\r\n                    alert(res.data._error)\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./ContestList.vue?vue&type=template&id=682d7f8f\"\nimport script from \"./ContestList.vue?vue&type=script&lang=js\"\nexport * from \"./ContestList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Work\\\\codes\\\\web\\\\yao\\\\front-end\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n<div :class=\"class\" :style=\"(target == undefined ? '' : 'cursor: pointer;') + (current ^ active ? 'color: #F70' : '')\" @click=\"like\">\r\n    <ion-icon :name=\"icon\" style=\"vertical-align: middle; font-size: 1rem; margin-right: 2px;\"></ion-icon>\r\n    <span style=\"vertical-align: middle;\">{{num}}</span>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { callAPI } from '@/utils'\r\n\r\nexport default {\r\n    props: [ 'icon', 'number', 'active', 'target', 'class' ],\r\n    data() {\r\n        return { current: false }\r\n    },\r\n    methods: {\r\n        like() {\r\n            if (this.target == undefined) return\r\n            callAPI('likes', 'post', { target: this.target.name, id: this.target.id }, (res) => {\r\n                this.current = !this.current\r\n            }, (res) => {\r\n                alert(res.data._error)\r\n            })\r\n        }\r\n    },\r\n    computed: {\r\n        num() {\r\n            if (this.active) return this.number + (this.current ? -1 : 0)\r\n            return this.number + (this.current ? 1 : 0)\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./ClickLike.vue?vue&type=template&id=7b0daaa0\"\nimport script from \"./ClickLike.vue?vue&type=script&lang=js\"\nexport * from \"./ClickLike.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Work\\\\codes\\\\web\\\\yao\\\\front-end\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getRule","pretest","score_private","getStatus","start_time","end_time","over","date","Date","getRegisterStatus","status","color","val","class","_createElementVNode","style","_createElementBlock","_hoisted_3","_ctx","user_group","onClick","$options","$data","_toDisplayString","_createBlock","_component_Table","row","sizes","get","next","pagination","data","reloadContests","success","components","Table","ClickLike","methods","getLine","h","reg","register_status","start","end","finished","href","this","register","contest_id","title","format","name","registrants","icon","number","like","target","id","active","liked","async","query","res","Promise","rej","callAPI","console","log","e","alert","_error","getNext","a","b","reload","nextTick","addContest","event","preventDefault","__exports__","render","$props","undefined","_createVNode","_component_ion_icon","props","current","computed","num"],"sourceRoot":""}