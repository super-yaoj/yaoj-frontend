"use strict";(self["webpackChunkyaoj"]=self["webpackChunkyaoj"]||[]).push([[1477],{37271:function(t,e,n){function r(t,e){return t&&e?"OI":t&&!e?"UOJ":!t&&e?"IOI":t||e?void 0:"ACM"}function s(t,e,n){if(n)return"Finished";var r=new Date;return r<t?"Not started":r<=e?"Running":"Not finished"}function o(t){switch(t){case 0:return{color:"gray",val:"disabled"};case 1:return{color:"green",val:"register"};case 2:return{color:"red",val:"cancel"}}}n.d(e,{lB:function(){return o},lR:function(){return s},pg:function(){return r}})},91477:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var r=n(49199);const s={class:"mt-4 container"},o={class:"row mb-3"},a=(0,r.createElementVNode)("div",{class:"col"},[(0,r.createElementVNode)("div",{class:"h3 mb-0"},"Contest List")],-1),i={key:0,class:"col",style:{"text-align":"right"}},l={key:0,class:"text-success small"};function c(t,e,n,c,d,u){const h=(0,r.resolveComponent)("Table");return(0,r.openBlock)(),(0,r.createElementBlock)("div",s,[(0,r.createElementVNode)("div",o,[a,t.$user.user_group<=1?((0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createElementVNode)("button",{class:"btn btn-sm btn-primary",onClick:e[0]||(e[0]=(...t)=>u.addContest&&u.addContest(...t))},"New Contest"),d.success>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",l," Successfully added, contest id: "+(0,r.toDisplayString)(d.success)+". ",1)):(0,r.createCommentVNode)("",!0)])):(0,r.createCommentVNode)("",!0)]),d.reloadContests?((0,r.openBlock)(),(0,r.createBlock)(h,{key:0,row:u.getLine,sizes:[20,50,100],get:u.getContests,next:u.getNext,pagination:!0},null,8,["row","get","next"])):(0,r.createCommentVNode)("",!0)])}var d=n(22664),u=n(51826),h=n(58661),m=n(6686),g=n(37271),p={data(){return{reloadContests:!0,success:""}},components:{Table:d.Z,ClickLike:u.Z},methods:{getLine(t){if(null==t)return[(0,r.h)("td",{style:"width: 10%"},(0,r.h)("strong","Operation")),(0,r.h)("td",{style:"width: 30%"},(0,r.h)("strong","Contest Name")),(0,r.h)("td",{style:"width: 5%"},(0,r.h)("strong","Rule")),(0,r.h)("td",{style:"width: 20%"},(0,r.h)("strong","Start Time")),(0,r.h)("td",{style:"width: 10%"},(0,r.h)("strong","Length")),(0,r.h)("td",{style:"width: 10%"},(0,r.h)("strong","Status")),(0,r.h)("td",{style:"width: 10%"},(0,r.h)("strong","Comments"))];var e=(0,g.lB)(t.register_status),n=new Date(t.start_time),s=new Date(t.end_time),o=(0,g.lR)(n,s,t.finished);return[(0,r.h)("td",(0,r.h)("a",{href:"#",style:"color:"+e.color,onClick:this.register(t.contest_id,t.register_status)},e.val)),(0,r.h)("td",{},(0,r.h)("a",{href:"#/contest/"+t.contest_id},t.title)),(0,r.h)("td",{},(0,g.pg)(t.pretest,t.score_private)),(0,r.h)("td",{},(0,m.WU)(n)),(0,r.h)("td",{},(s-n)/6e4+" min"),(0,r.h)("td",{},(0,r.h)("span",{style:"color:"+{"Not started":"green",Running:"red","Not finished":"blue",Finished:"black"}[o]},o)),(0,r.h)("td",(0,r.h)("div",{class:"row px-0 mx-0 justify-content-end"},[(0,r.h)("a",{class:"col px-0",href:"#/contest/"+t.contest_id+"/participants"},[(0,r.h)("ion-icon",{name:"people",style:"vertical-align: middle; font-size: 1rem; margin-right: 2px;"},null),(0,r.h)("span",{style:"vertical-align: middle;"},t.registrants)]),(0,r.h)(u.Z,{class:"col px-0",icon:"thumbs-up-outline",number:t.like,target:{name:"contest",id:t.contest_id},active:t.liked})]))]},async getContests(t){try{var e=await new Promise(((e,n)=>{(0,h.F)("contests","get",t,e,n)}));return console.log(e.data),e.data}catch(n){alert(n.data._error)}},getNext(t,e){return null==t?e<0?1<<30:0:t-e},reload(){this.reloadContests=!1,(0,r.nextTick)((()=>{this.reloadContests=!0}))},addContest(){(0,h.F)("contest","post",{},(t=>{this.success=t.data.id,this.reload()}),(t=>{alert(t.data._error)}))},register(t,e){return n=>{n.preventDefault(),0!=e&&(0,h.F)("contest_participants",1==e?"post":"delete",{contest_id:t},(t=>{this.reload()}),(t=>{alert(t.data._error)}))}}}},v=n(40089);const k=(0,v.Z)(p,[["render",c]]);var f=k},51826:function(t,e,n){n.d(e,{Z:function(){return d}});var r=n(49199);const s={style:{"vertical-align":"middle"}};function o(t,e,n,o,a,i){const l=(0,r.resolveComponent)("ion-icon");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(n.class),style:(0,r.normalizeStyle)((void 0==n.target?"":"cursor: pointer;")+(a.current^n.active?"color: #F70":"")),onClick:e[0]||(e[0]=(...t)=>i.like&&i.like(...t))},[(0,r.createVNode)(l,{name:n.icon,style:{"vertical-align":"middle","font-size":"1rem","margin-right":"2px"}},null,8,["name"]),(0,r.createElementVNode)("span",s,(0,r.toDisplayString)(i.num),1)],6)}var a=n(58661),i={props:["icon","number","active","target","class"],data(){return{current:!1}},methods:{like(){void 0!=this.target&&(0,a.F)("likes","post",{target:this.target.name,id:this.target.id},(t=>{this.current=!this.current}),(t=>{alert(t.data._error)}))}},computed:{num(){return this.active?this.number+(this.current?-1:0):this.number+(this.current?1:0)}}},l=n(40089);const c=(0,l.Z)(i,[["render",o]]);var d=c}}]);
//# sourceMappingURL=1477.003f1c1a.js.map